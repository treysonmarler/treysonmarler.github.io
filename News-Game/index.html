<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Nebraskan: Dryer Fire</title>
    <style>
        /* Basic page styling */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            color: #333;
        }

        h1 {
            font-size: 1.5rem;
            color: #d90000; /* Daily Nebraskan Red */
        }

        /* The main game container */
        #game-container {
            position: relative;
            width: 400px;
            height: 600px;
            border: 3px solid #000;
            background-color: #70c5ce; /* Sky Blue */
            overflow: hidden; /* Keeps everything inside */
        }

        /* The game canvas is where we draw the game */
        #game-canvas {
            width: 100%;
            height: 100%;
        }

        /* Start screen and Game Over screen styling */
        #start-screen, #game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10;
            padding: 20px;
            box-sizing: border-box; /* Ensures padding doesn't break layout */
        }

        /* Hide the game-over screen initially */
        #game-over-screen {
            display: none;
        }

        .logo {
            width: 90%;
            max-width: 350px;
            margin-bottom: 20px;
        }

        .instructions {
            font-size: 1.1rem;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .start-button {
            font-size: 1.5rem;
            font-weight: bold;
            padding: 15px 30px;
            background-color: #d90000; /* DN Red */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 4px #8c0000; /* 3D effect */
            transition: all 0.1s ease;
        }

        .start-button:active {
            box-shadow: 0 2px #8c0000;
            transform: translateY(2px);
        }

        /* Score display during the game */
        #score-display {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            font-weight: bold;
            color: white;
            z-index: 5;
            -webkit-text-stroke: 2px black; /* Outline for visibility */
            text-stroke: 2px black;
            display: none; /* Hidden until game starts */
        }

    </style>
</head>
<body>

    <h1>Dryer Fire Flapper</h1>

    <div id="game-container">
        
        <div id="start-screen">
            <img src="https://bloximages.newyork1.vip.townnews.com/dailynebraskan.com/content/tncms/custom/image/7977647a-bd51-11ed-9a1b-271c59e332ff.png?resize=1200%2C188" 
                 alt="Daily Nebraskan Logo" class="logo">
            
            <p class="instructions">
                A dryer fire is breaking out! <br>
                Click your mouse to navigate through the dryers and avoid the fire below.
            </p>
            
            <button id="start-button" class="start-button">START GAME</button>
        </div>

        <div id="game-over-screen">
            <img src="https://bloximages.newyork1.vip.townnews.com/dailynebraskan.com/content/tncms/custom/image/7977647a-bd51-11ed-9a1b-271c59e332ff.png?resize=1200%2C188" 
                 alt="Daily Nebraskan Logo" class="logo">
            
            <h2>GAME OVER</h2>
            <p id="final-score" class="instructions">Your Score: 0</p>
            
            <button id="restart-button" class="start-button">TRY AGAIN</button>
        </div>

        <div id="score-display">0</div>

        <canvas id="game-canvas"></canvas>

    </div>

    <script>
        // === 1. GET HTML ELEMENTS ===
        const canvas = document.getElementById('game-canvas');
        const context = canvas.getContext('2d');
        
        // Get UI Screens and Buttons
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        
        // Get Score Displays
        const scoreDisplay = document.getElementById('score-display');
        const finalScoreDisplay = document.getElementById('final-score');

        // Set Canvas dimensions
        canvas.width = 400;
        canvas.height = 600;

        // === 2. GAME VARIABLES ===
        let player;
        let obstacles = [];
        let score = 0;
        let gameSpeed = 2;
        let gravity = 0.3;
        let lift = -6; // How high the player "flaps"
        let frame = 0; // Frame counter to spawn obstacles
        let isGameStarted = false;
        let isGameOver = false;

        // Ground Height
        const fireGroundHeight = 60;

        // === 3. PLAYER OBJECT ===
        // We'll just use a simple rectangle for the player
        // A red square could represent the "breaking news element"
        class Player {
            constructor() {
                this.x = 80;
                this.y = canvas.height / 2;
                this.width = 30;
                this.height = 30;
                this.velocity = 0;
            }

            // Draw the player
            draw() {
                context.fillStyle = '#d90000'; // DN Red
                context.fillRect(this.x, this.y, this.width, this.height);
                context.strokeStyle = '#000'; // Black outline
                context.strokeRect(this.x, this.y, this.width, this.height);
            }

            // Update player's position
            update() {
                this.velocity += gravity;
                this.y += this.velocity;

                // Stop player from falling off the top
                if (this.y < 0) {
                    this.y = 0;
                    this.velocity = 0;
                }

                // Check for collision with the fire ground
                if (this.y + this.height > canvas.height - fireGroundHeight) {
                    this.y = canvas.height - fireGroundHeight - this.height;
                    this.velocity = 0;
                    endGame();
                }
            }

            // Flap function
            flap() {
                this.velocity = lift;
            }
        }

        // === 4. OBSTACLE (DRYER) OBJECT ===
        class Obstacle {
            constructor() {
                this.width = 70; // Width of the dryer obstacle
                this.gap = 200; // Gap for the player to fly through
                
                // Randomly position the gap
                this.topHeight = Math.random() * (canvas.height - this.gap - fireGroundHeight - 50) + 20; // 20px padding from top
                this.bottomHeight = canvas.height - this.topHeight - this.gap;

                this.x = canvas.width; // Start off-screen
                this.color = '#AAAAAA'; // Gray for the dryer
                this.borderColor = '#444444';
                this.passed = false; // To track score
            }

            // Draw the dryer
            draw() {
                context.fillStyle = this.color;
                context.strokeStyle = this.borderColor;
                context.lineWidth = 3;
                
                // Draw top dryer
                context.fillRect(this.x, 0, this.width, this.topHeight);
                context.strokeRect(this.x, 0, this.width, this.topHeight);
                
                // Draw bottom dryer
                context.fillRect(this.x, canvas.height - this.bottomHeight, this.width, this.bottomHeight);
                context.strokeRect(this.x, canvas.height - this.bottomHeight, this.width, this.bottomHeight);
            }

            // Move the dryer to the left
            update() {
                this.x -= gameSpeed;

                // Check if player passed the obstacle
                if (!this.passed && this.x + this.width < player.x) {
                    score++;
                    scoreDisplay.textContent = score;
                    this.passed = true;
                }

                // Check for collision
                this.checkCollision();
            }

            checkCollision() {
                const playerRect = { x: player.x, y: player.y, width: player.width, height: player.height };
                
                // Define the top and bottom dryer rectangles
                const topRect = { x: this.x, y: 0, width: this.width, height: this.topHeight };
                const bottomRect = { x: this.x, y: canvas.height - this.bottomHeight, width: this.width, height: this.bottomHeight };

                // AABB Collision Check
                if (
                    playerRect.x < topRect.x + topRect.width &&
                    playerRect.x + playerRect.width > topRect.x &&
                    playerRect.y < topRect.y + topRect.height &&
                    playerRect.y + playerRect.height > topRect.y
                ) {
                    endGame(); // Collision with top dryer
                }
                
                if (
                    playerRect.x < bottomRect.x + bottomRect.width &&
                    playerRect.x + playerRect.width > bottomRect.x &&
                    playerRect.y < bottomRect.y + bottomRect.height &&
                    playerRect.y + playerRect.height > bottomRect.y
                ) {
                    endGame(); // Collision with bottom dryer
                }
            }
        }

        // === 5. GAME HELPER FUNCTIONS ===
        
        // Function to draw the "fire" ground
        function drawFireGround() {
            context.fillStyle = '#FF4500'; // Orange-Red for fire
            context.fillRect(0, canvas.height - fireGroundHeight, canvas.width, fireGroundHeight);
            
            // Add some "flame" effects
            context.fillStyle = '#FFD700'; // Yellow for flames
            for (let i = 0; i < canvas.width; i += 10) {
                let flameHeight = Math.random() * 20 + 10;
                context.fillRect(i, canvas.height - fireGroundHeight - flameHeight + 10, 8, flameHeight);
            }
        }

        // Function to handle obstacle spawning
        function handleObstacles() {
            // Spawn a new obstacle every 150 frames
            if (frame % 150 === 0) {
                obstacles.push(new Obstacle());
            }

            // Update and draw all obstacles
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].update();
                obstacles[i].draw();

                // Remove obstacles that are off-screen
                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                }
            }
        }

        // Function to reset all game variables
        function resetGame() {
            player = new Player();
            obstacles = [];
            score = 0;
            frame = 0;
            isGameOver = false;
            isGameStarted = true;
            
            // Reset UI
            scoreDisplay.textContent = score;
            scoreDisplay.style.display = 'block';
            gameOverScreen.style.display = 'none';
            startScreen.style.display = 'none';
        }

        // Function to start the game
        function startGame() {
            resetGame();
            gameLoop(); // Start the animation loop
        }

        // Function to end the game
        function endGame() {
            if (isGameOver) return; // Don't run twice
            isGameOver = true;
            isGameStarted = false;
            
            // Show game over screen
            scoreDisplay.style.display = 'none';
            finalScoreDisplay.textContent = `Your Score: ${score}`;
            gameOverScreen.style.display = 'flex';
        }

        // === 6. THE MAIN GAME LOOP ===
        function gameLoop() {
            if (isGameOver) return; // Stop the loop if game is over

            // Clear the canvas every frame
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the fire ground
            drawFireGround();
            
            // Update and draw obstacles
            handleObstacles();

            // Update and draw the player
            player.update();
            player.draw();

            // Increment frame counter
            frame++;

            // Continue the loop
            requestAnimationFrame(gameLoop);
        }

        // === 7. EVENT LISTENERS ===
        
        // Listen for mouse click to "flap"
        window.addEventListener('mousedown', () => {
            if (isGameStarted) {
                player.flap();
            }
        });

        // Listen for Start Button click
        startButton.addEventListener('click', () => {
            startGame();
        });

        // Listen for Restart Button click
        restartButton.addEventListener('click', () => {
            startGame();
        });

    </script>

</body>
</html>