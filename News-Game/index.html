<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Nebraskan: Dryer Fire</title>
    <style>
        /* Basic page styling */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            color: #333;
        }

        h1 {
            font-size: 1.5rem;
            color: #d90000; /* Daily Nebraskan Red */
        }

        /* The main game container */
        #game-container {
            position: relative;
            width: 400px;
            height: 600px;
            border: 3px solid #000;
            background-color: #70c5ce; /* Sky Blue */
            overflow: hidden; /* Keeps everything inside */
        }
        
        /* === NEW CSS === */
        /* This class will be added by JS when the game starts */
        /* It adds the logo as a semi-transparent background */
        #game-container.game-active {
            background-image: 
                /* Create a semi-transparent white layer */
                linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)),
                /* The logo image underneath */
                url('https://bloximages.newyork1.vip.townnews.com/dailynebraskan.com/content/tncms/custom/image/7977647a-bd51-11ed-9a1b-271c59e332ff.png?resize=1200%2C188');
            background-repeat: no-repeat;
            background-position: center;
            background-size: 80%; /* Make it large but not full width */
        }
        /* === END NEW CSS === */


        /* The game canvas is where we draw the game */
        #game-canvas {
            width: 100%;
            height: 100%;
            /* Make canvas transparent so we see container background */
            background-color: transparent; 
            position: relative;
            z-index: 5; /* Sit on top of the container's background */
        }

        /* Start screen and Game Over screen styling */
        #start-screen, #game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10; /* Sit on top of everything */
            padding: 20px;
            box-sizing: border-box; 
        }

        #game-over-screen {
            display: none;
        }

        .logo {
            width: 90%;
            max-width: 350px;
            margin-bottom: 20px;
        }

        .instructions {
            font-size: 1.1rem;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .start-button {
            font-size: 1.5rem;
            font-weight: bold;
            padding: 15px 30px;
            background-color: #d90000;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 4px #8c0000;
            transition: all 0.1s ease;
        }

        .start-button:active {
            box-shadow: 0 2px #8c0000;
            transform: translateY(2px);
        }

        /* Score display during the game */
        #score-display {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            font-weight: bold;
            color: white;
            z-index: 15; /* On top of game, on top of screens */
            -webkit-text-stroke: 2px black;
            text-stroke: 2px black;
            display: none; /* Hidden until game starts */
        }

    </style>
</head>
<body>

    <h1>Dryer Fire Flapper</h1>

    <div id="game-container">
        
        <div id="start-screen">
            <img src="https://bloximages.newyork1.vip.townnews.com/dailynebraskan.com/content/tncms/custom/image/7977647a-bd51-11ed-9a1b-271c59e332ff.png?resize=1200%2C188" 
                 alt="Daily Nebraskan Logo" class="logo">
            <p class="instructions">
                A dryer fire is breaking out! <br>
                Click your mouse to navigate through the dryers and avoid the fire below.
            </p>
            <button id="start-button" class="start-button">START GAME</button>
        </div>

        <div id="game-over-screen">
            <img src="https://bloximages.newyork1.vip.townnews.com/dailynebraskan.com/content/tncms/custom/image/7977647a-bd51-11ed-9a1b-271c59e332ff.png?resize=1200%2C188" 
                 alt="Daily Nebraskan Logo" class="logo">
            <h2>GAME OVER</h2>
            <p id="final-score" class="instructions">Your Score: 0</p>
            <button id="restart-button" class="start-button">TRY AGAIN</button>
        </div>

        <div id="score-display">0</div>

        <canvas id="game-canvas"></canvas>

    </div>

    <script>
        // === 1. GET HTML ELEMENTS ===
        const canvas = document.getElementById('game-canvas');
        const context = canvas.getContext('2d');
        
        // === NEW: Get game container ===
        const gameContainer = document.getElementById('game-container');
        
        // Get UI Screens and Buttons
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        
        // Get Score Displays
        const scoreDisplay = document.getElementById('score-display');
        const finalScoreDisplay = document.getElementById('final-score');

        // Set Canvas dimensions
        canvas.width = 400;
        canvas.height = 600;

        // === 2. GAME VARIABLES ===
        let player;
        let obstacles = [];
        let score = 0;
        let gameSpeed = 2;
        let gravity = 0.3;
        let lift = -6; // How high the player "flaps"
        let frame = 0; // Frame counter to spawn obstacles
        let isGameStarted = false;
        let isGameOver = false;

        // Ground Height
        const fireGroundHeight = 60;

        // === 3. PLAYER OBJECT ===
        class Player {
            constructor() {
                this.x = 80;
                this.y = canvas.height / 2;
                this.width = 30;
                this.height = 30;
                this.velocity = 0;
            }

            draw() {
                context.fillStyle = '#d90000'; // DN Red
                context.fillRect(this.x, this.y, this.width, this.height);
                context.strokeStyle = '#000'; // Black outline
                context.strokeRect(this.x, this.y, this.width, this.height);
            }

            update() {
                this.velocity += gravity;
                this.y += this.velocity;

                if (this.y < 0) {
                    this.y = 0;
                    this.velocity = 0;
                }

                if (this.y + this.height > canvas.height - fireGroundHeight) {
                    this.y = canvas.height - fireGroundHeight - this.height;
                    this.velocity = 0;
                    endGame();
                }
            }

            flap() {
                this.velocity = lift;
            }
        }

        // === 4. OBSTACLE (DRYER) OBJECT ===
        class Obstacle {
            constructor() {
                this.width = 70; // Width of the dryer obstacle
                this.gap = 200; // Gap for the player to fly through
                
                this.topHeight = Math.random() * (canvas.height - this.gap - fireGroundHeight - 50) + 20; 
                this.bottomHeight = canvas.height - this.topHeight - this.gap;

                this.x = canvas.width; 
                this.color = '#AAAAAA'; 
                this.borderColor = '#444444';
                this.passed = false;
            }

            // Draw the dryer (with door)
            draw() {
                context.fillStyle = this.color;
                context.strokeStyle = this.borderColor;
                context.lineWidth = 3;
                
                // Draw top dryer
                context.fillRect(this.x, 0, this.width, this.topHeight);
                context.strokeRect(this.x, 0, this.width, this.topHeight);
                
                // Draw bottom dryer
                context.fillRect(this.x, canvas.height - this.bottomHeight, this.width, this.bottomHeight);
                context.strokeRect(this.x, canvas.height - this.bottomHeight, this.width, this.bottomHeight);

                // === Dryer Door Art ===
                const doorRadius = 25;
                const doorCenterX = this.x + this.width / 2;
                const doorColor = '#666666'; 
                const windowColor = '#DDDDDD'; 

                // Top Dryer Door
                if (this.topHeight > doorRadius * 2 + 10) { 
                    context.beginPath();
                    context.arc(doorCenterX, this.topHeight - doorRadius - 15, doorRadius, 0, Math.PI * 2);
                    context.fillStyle = doorColor;
                    context.fill();
                    context.strokeStyle = this.borderColor;
                    context.stroke();
                    // Window
                    context.beginPath();
                    context.arc(doorCenterX, this.topHeight - doorRadius - 15, doorRadius * 0.6, 0, Math.PI * 2);
                    context.fillStyle = windowColor;
                    context.fill();
                }

                // Bottom Dryer Door
                if (this.bottomHeight > doorRadius * 2 + 10) { 
                    context.beginPath();
                    context.arc(doorCenterX, canvas.height - this.bottomHeight + doorRadius + 15, doorRadius, 0, Math.PI * 2);
                    context.fillStyle = doorColor;
                    context.fill();
                    context.strokeStyle = this.borderColor;
                    context.stroke();
                    // Window
                    context.beginPath();
                    context.arc(doorCenterX, canvas.height - this.bottomHeight + doorRadius + 15, doorRadius * 0.6, 0, Math.PI * 2);
                    context.fillStyle = windowColor;
                    context.fill();
                }
                // === End Dryer Door ===
            }

            update() {
                this.x -= gameSpeed;

                if (!this.passed && this.x + this.width < player.x) {
                    score++;
                    scoreDisplay.textContent = score;
                    this.passed = true;
                }

                this.checkCollision();
            }

            checkCollision() {
                const playerRect = { x: player.x, y: player.y, width: player.width, height: player.height };
                const topRect = { x: this.x, y: 0, width: this.width, height: this.topHeight };
                const bottomRect = { x: this.x, y: canvas.height - this.bottomHeight, width: this.width, height: this.bottomHeight };

                if (
                    playerRect.x < topRect.x + topRect.width &&
                    playerRect.x + playerRect.width > topRect.x &&
                    playerRect.y < topRect.y + topRect.height &&
                    playerRect.y + playerRect.height > topRect.y
                ) {
                    endGame(); // Collision with top dryer
                }
                
                if (
                    playerRect.x < bottomRect.x + bottomRect.width &&
                    playerRect.x + playerRect.width > bottomRect.x &&
                    playerRect.y < bottomRect.y + bottomRect.height &&
                    playerRect.y + playerRect.height > bottomRect.y
                ) {
                    endGame(); // Collision with bottom dryer
                }
            }
        }

        // === 5. GAME HELPER FUNCTIONS ===
        
        function drawFireGround() {
            context.fillStyle = '#FF4500'; // Orange-Red for fire
            context.fillRect(0, canvas.height - fireGroundHeight, canvas.width, fireGroundHeight);
            
            context.fillStyle = '#FFD700'; // Yellow for flames
            for (let i = 0; i < canvas.width; i += 10) {
                let flameHeight = Math.random() * 20 + 10;
                context.fillRect(i, canvas.height - fireGroundHeight - flameHeight + 10, 8, flameHeight);
            }
        }

        function handleObstacles() {
            if (frame % 150 === 0) {
                obstacles.push(new Obstacle());
            }

            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].update();
                obstacles[i].draw();

                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                }
            }
        }

        function resetGame() {
            player = new Player();
            obstacles = [];
            score = 0;
            frame = 0;
            isGameOver = false;
            isGameStarted = true;
            
            // Reset UI
            scoreDisplay.textContent = score;
            scoreDisplay.style.display = 'block';
            gameOverScreen.style.display = 'none';
            startScreen.style.display = 'none';
            
            // === NEW: Add class to container to show logo ===
            gameContainer.classList.add('game-active');
        }

        function startGame() {
            resetGame();
            gameLoop(); // Start the animation loop
        }

        function endGame() {
            if (isGameOver) return; 
            isGameOver = true;
            isGameStarted = false;
            
            // Show game over screen
            scoreDisplay.style.display = 'none';
            finalScoreDisplay.textContent = `Your Score: ${score}`;
            gameOverScreen.style.display = 'flex';

            // === NEW: Remove class to hide logo ===
            gameContainer.classList.remove('game-active');
        }

        // === 6. THE MAIN GAME LOOP ===
        function gameLoop() {
            if (isGameOver) return; 

            // Clear the canvas every frame
            // We clear to transparent so the background logo shows through
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the fire ground
            drawFireGround();
            
            // Update and draw obstacles
            handleObstacles();

            // Update and draw the player
            player.update();
            player.draw();

            frame++;
            requestAnimationFrame(gameLoop);
        }

        // === 7. EVENT LISTENERS ===
        
        window.addEventListener('mousedown', () => {
            if (isGameStarted) {
                player.flap();
            }
        });

        startButton.addEventListener('click', () => {
            startGame();
        });

        restartButton.addEventListener('click', () => {
            startGame();
        });

    </script>

</body>
</html>